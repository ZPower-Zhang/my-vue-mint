webpackJsonp([5],{DYcK:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("Xxa5"),a=r.n(o),n=r("exGp"),s=r.n(n),i=r("0eBz"),u=r("jJNh"),c={name:"signup",components:{HeaderTop:i.a},data:function(){return{showU:!1,showBack:!0,showTtl:"注册",phoneNum:null,validateCode:null,showErr:!1,errMsg:"",show:!0,count:"",timer:null}},mounted:function(){},methods:{getCode:function(){var e=this;return s()(a.a.mark(function t(){var r,o,n,s,i,c,l;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e,o=e.phoneNum,n=/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/i,o){t.next=6;break}return r.toggleError(!0,"请输入手机号"),t.abrupt("return",!1);case 6:if(n.test(o)){t.next=9;break}return r.toggleError(!0,"手机号格式错误"),t.abrupt("return",!1);case 9:return r.toggleError(!1),s=60,e.timer||(e.count=s,e.show=!1,e.timer=setInterval(function(){e.count>0&&e.count<=s?e.count--:(e.show=!0,clearInterval(e.timer),e.timer=null)},1e3)),t.next=14,Object(u.p)({phone:o});case 14:(i=t.sent)&&i.flag&&(console.log(i),"200"==i.ret?(c=i.data.statusCode||"",l=i.data.statusMsg||"",console.log(c),console.log(l),"000000"!=c&&r.toggleError(!0,l)):r.toggleError(!0,i.msg));case 16:case"end":return t.stop()}},t,e)}))()},toggleError:function(e,t){this.showErr=e,this.errMsg=e?t:""},goToNext:function(){var e=this;return s()(a.a.mark(function t(){var r,o,n,s,i,c,l,p;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e,o=e.phoneNum,n=e.validateCode,s=/^(0|86|17951)?(13[0-9]|15[012356789]|17[678]|18[0-9]|14[57])[0-9]{8}$/i,i=/^[0-9]{6}$/i,o){t.next=6;break}return r.toggleError(!0,"请输入手机号"),t.abrupt("return",!1);case 6:if(s.test(o)){t.next=9;break}return r.toggleError(!0,"手机号格式错误"),t.abrupt("return",!1);case 9:if(n){t.next=12;break}return r.toggleError(!0,"请输入验证码"),t.abrupt("return",!1);case 12:if(i.test(n)){t.next=15;break}return r.toggleError(!0,"验证码输入不正确"),t.abrupt("return",!1);case 15:return r.toggleError(!1),t.next=18,Object(u.b)({phone:o,code:n});case 18:(c=t.sent)&&c.flag&&("200"==(c.ret||"")?(l=r.$route.params.comprotype||"no",p=r.$route.params.comproid||"no",r.$router.push({path:"complete",query:{phoneNum:o,protype:l,proid:p}})):r.toggleError(!0,c.msg));case 20:case"end":return t.stop()}},t,e)}))()},goToNext2:function(){var e=this;return s()(a.a.mark(function t(){var r,o,n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:o=(r=e).$route.params.comprotype||"no",n=r.$route.params.comproid||"no",r.$router.push({path:"complete",query:{protype:o,proid:n}});case 4:case"end":return t.stop()}},t,e)}))()}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{position:"relative"}},[r("HeaderTop",{attrs:{showBack:e.showBack,showTtl:e.showTtl,showU:e.showU}}),e._v(" "),r("div",{staticClass:"g-signUp"},[r("div",{staticClass:"error-box",class:{"block-i":e.showErr}},[r("i",{staticClass:"mintui mintui-field-warning"}),e._v("\n        "+e._s(e.errMsg)+"\n      ")]),e._v(" "),r("div",{staticClass:"m-ipt"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNum,expression:"phoneNum"}],attrs:{type:"text",placeholder:"手机号"},domProps:{value:e.phoneNum},on:{input:function(t){t.target.composing||(e.phoneNum=t.target.value)}}})]),e._v(" "),r("div",{staticClass:"m-ipt"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.validateCode,expression:"validateCode"}],staticClass:"ipt-width",attrs:{type:"text",placeholder:"短信验证码"},domProps:{value:e.validateCode},on:{input:function(t){t.target.composing||(e.validateCode=t.target.value)}}}),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],staticClass:"send-code",on:{click:e.getCode}},[e._v("获取验证码")]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"send-code"},[e._v(e._s(e.count)+" s")])]),e._v(" "),r("div",{staticClass:"m-sigle-btn"},[r("mt-button",{attrs:{type:"default",size:"small"},on:{click:e.goToNext}},[e._v("下一步")])],1)])],1)},staticRenderFns:[]},p=r("VU/8")(c,l,!1,null,null,null);t.default=p.exports}});
//# sourceMappingURL=5.8d306175f7a2c0ef2efb.js.map